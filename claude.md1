# 下载器开发文档
现在开发一个基于aria2的百度网盘文件电脑下载器，包含下载器源码，github工作流文件自动构建（手动触发）
其中，主目录下的/web文件夹用于我上传网站服务器作为验证(这个文件夹需要由你来创建)，网站域名为download.linglong521.cn，电脑下载器需要这个网站作为获取数据的接口（核对下载编码，获取实际下载链接）
主目录下的/bot文件夹我会上传QQ群内机器人js（这个文件夹里面我放了个示例文件给你参考）
主目录下的/apis是我之前网站项目的php文件，你可以从里面知道如何获取百度网盘文件列表，如何获取百度网盘下载链接

关键步骤：
1.群内机器人
用户在群里发送百度网盘链接，https://pan.baidu.com/s/xxx，将链接存储到redis 8，redis的地址和密码什么的和示例文件相同即可。如果有提取码则支持自动解析提取码存储
通过网盘分享的文件：Life is Strange 2.part01.exe
链接: https://pan.baidu.com/s/1pLWA59iaLvUVBIZho9mNJg 提取码: 4afb
也支持这种，模糊匹配寻找链接和提取码
redis存储值为链接或者链接+提取码，键为下载编码，下载编码创建为1-4位的随机数字，保证其不会重复，有效期12小时
然后撤回用户发的链接，然后艾特用户
格式为
@凌云
您的下载编码为
1234
-----
有效期：12 小时

这里的有效期动态显示，而不是固定12小时，要读取实际时间，如果有分钟就显示分钟，精确到秒
需要核对用户的捐赠校验，暂时不支持积分，不用管积分

2.download.linglong521.cn接口
首先需要一个用户核对下载编码百度网盘链接解析的接口，返回给下载器文件列表
然后还有一个获取下载链接的接口，返回给下载器链接和可能需要的UA

3.下载器
下载器名称为“图片下载器”
大致外观要求：
要求界面现代化，美观，加载效果好

下载说明：支持批量下载，支持下载文件夹，根据下载的文件夹和子文件夹创建对应文件夹，保持源路径

详细布局要求：
软件左边几个分区：
首页
传输
设置

首页：
下方一个悬浮输入框，用于输入下载编码，右边一个“获取”的按钮和一个“下载”的按钮，这个按钮也在输入框内，点击后，开始获取文件列表，获取到文件列表之后，页面展示文件列表
页面左上角是当前文件路径，例如游戏文件 / 我的世界 / 手机版，允许点击切换，右上角显示文件/文件夹数量，例如：已全部加载，共22个
文件列表包含文件/文件夹图标，文件名，大小，修改时间
文件/文件夹图标左边有勾选框，文件名这个显示栏左边也有一个勾选框，可以全选
然后鼠标移动到哪个文件上面，文件名右边就会显示下载按钮的图标，点击就可以下载

传输：
传输页面左边又分为3个栏目，等待中，下载中，已完成

等待中
是先将用户的下载任务放在这里，然后一次只处理一个获取下载链接，然后下载，另外下载中的任务最多3个，只有下载中的任务小于3个才会继续处理等待中的任务（被暂停的任务也算下载中，三个暂停的任务同样不会处理等待中的任务），显示勾选框，文件/文件夹图标，文件名，大小（如果是文件夹显示为--），状态（已暂停/处理中/等待处理/异常），提交获取下载链接失败自动间隔5秒后重试，超过3次失败此文件转变为异常状态，超过3个文件为异常，则暂停所有等待中的文件
界面左上方显示全部暂停/全部开始/全部删除，当有文件被勾选，左上角的显示转变为暂停/开始/删除
鼠标放在文件上显示删除图标按钮，开始下载按钮，暂停按钮（根据文件状态显示哪些按钮，比如异常的文件可以只显示删除和下载按钮，等待处理的文件显示暂停和删除按钮之类的）
当有文件被勾选，左上角的显示转变为暂停/开始/删除

下载中
界面左上方显示全部暂停/全部开始/全部删除，三个按钮，当有文件被勾选，左上角的显示转变为暂停/开始/删除
显示勾选框，文件/文件夹图标，文件名，大小（已下载大小/文件大小），状态（正在下载的时候显示文件下载速度和进度条，如果是文件夹则显示下载速度，剩余数量和进度条，被暂停的时候显示已暂停和进度条）

已完成
左上方显示清空全部记录，当有文件被勾选，左上角的显示转变为清除记录，显示勾选框，文件/文件夹图标，文件名，大小（如果是文件夹显示为--），完成时间（文件下载异常时，这里变成错误提示）
鼠标放在一个文件上面的时候大小显示变成按钮，一个删除记录图标按钮，一个跳转文件位置的图标按钮，一个打开文件的图标按钮，鼠标放在按钮上会有文字提示


设置：
允许用户设置的选项
下载位置（用户可以调取文件管理器设置下载位置），默认为系统下载目录下的“图片下载器”文件夹（没有这个文件夹的话下载器自行创建）

4.aria2配置说明
最大同时下载任务数3
同一服务器连接数64
单个任务最大线程数64
忽略ssl问题
文件分配方式prealloc


最后说明，如果上文中有遗漏的地方，请在开放过程中向用户确认应该怎么做
另外给你的php参考文件也好，机器人的js参考文件也好，只是告诉你如何实现这个接口，群内的调用是什么样的，而不是让你照搬，而是重新写适合我们这个项目的